<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>MJ - ArcaneSync</title>
  <link rel="stylesheet" href="style.css"/> 
  <link rel="icon" type="image/png" href="img/icon.png"/>
</head>
<body>
  <h1>Creation de votre joueur</h1>
    <a href="index.html">
        <button id="retour_accueil">Accueil</button>
    </a>
    <div>
      <p>Entrez le nom de votre personnage</p>
      <input type="text" id="player_name" placeholder="Nom de votre personnage">
      <br>

      <p>Entrez la classe de votre personnage</p>
      <input type="text" id="player_class" placeholder="Classe de votre personnage">
      <br>
      <p>Entrez la race de votre personnage</p>
      <input type="text" id="player_race" placeholder="Race de votre personnage">
      <br>

      <p>Entrez la vie de votre personnage</p>
      <input type="text" id="player_hp" placeholder="Vie de votre personnage">
      <br>

      <p>Entrez le mana de votre personnage</p>
      <input type="text" id="player_mana" placeholder="Mana de votre personnage">
      <br>
      <p>Vous disposez de 430 points de stats à repartir<br>Toute valeur dépassant 60 dans une statistique coûte le double de points. </p>
      <p>Force</p>
      <input type="text" id="stat_force" placeholder="Stat de Force">
      <br>
      <p>Dexterite</p>
      <input type="text" id="stat_dexterite" placeholder="Stat de Dexterite">
      <br>
      <p>Magie</p>
      <input type="text" id="stat_magie" placeholder="Stat de Magie">
      <br>
      <p>Constitution</p>
      <input type="text" id="stat_constitution" placeholder="Stat de Constitution">
      <br>
      <p>Charisme</p>
      <input type="text" id="stat_charisme" placeholder="Stat de Charisme">
      <br>
      <p>Chance</p>
      <input type="text" id="stat_perception" placeholder="Stat de Perception">
      <br>
      <p>Chance</p>
      <input type="text" id="stat_chance" placeholder="Stat de Chance">
      <br>
      <p>Intelligence</p>
      <input type="text" id="stat_intelligence" placeholder="Stat d'Intelligence">
      <br>
      <button id="save_player_creation">Enregistrer</button>
    </div> 
</body>
</html>
<script>
  document.getElementById('save_player_creation').addEventListener('click', () => {
    const data = {
      nom: document.getElementById('player_name').value,
      classe: document.getElementById('player_class').value,
      race: document.getElementById('player_race').value,
      mana: parseInt(document.getElementById('player_mana').value),
      hp: parseInt(document.getElementById('player_hp').value),
      stats: {
        force: parseInt(document.getElementById('stat_force').value),
        dexterite: parseInt(document.getElementById('stat_dexterite').value),
        magie: parseInt(document.getElementById('stat_magie').value),
        constitution: parseInt(document.getElementById('stat_constitution').value),
        charisme: parseInt(document.getElementById('stat_charisme').value),
        perception: parseInt(document.getElementById('stat_perception').value),
        chance: parseInt(document.getElementById('stat_chance').value),
        intelligence: parseInt(document.getElementById('stat_intelligence').value)
      }
    };
  
    fetch('http://localhost:3000/api/joueurs', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(json => {
      alert('Joueur enregistré avec succès !');
    })
    .catch(err => {
      console.error(err);
      alert("Erreur lors de l'enregistrement du joueur.");
    });
  });
  </script>